<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Appointments - Doctor Panel</title>
  <link rel="stylesheet" href="css/doctor-appointments.css" />
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h2>Doctor Panel</h2>
      <ul>
      <li><a href="doctor-dashboard.html" class="active">Dashboard</a></li>
      <li><a href="doctor-patients.html">My Patients</a></li>
      <li><a href="doctor-appointments.html">My Appointments</a></li>
      <li><a href="doctor-profile.html">Profile</a></li>
    </ul>
    </aside>

    <!-- Main Content -->
    <main class="content">
      <header class="topbar">
        <h1>My Appointments</h1>
      </header>

      <!-- Appointment List -->
      <section class="appointments-section">
        <table>
          <thead>
            <tr>
              <th>Patient Name</th>
              <th>Date</th>
              <th>Time</th>
              <th>Status</th>
              <th>Notes</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="appointmentTable">
            <tr>
              <td>John Doe</td>
              <td>2025-10-09</td>
              <td>10:00 AM</td>
              <td><span class="status pending">Pending</span></td>
              <td>â€”</td>
              <td>
                <button class="complete-btn">Mark Complete</button>
                <button class="cancel-btn">Cancel</button>
              </td>
            </tr>
            <tr>
              <td>Mary Ann</td>
              <td>2025-10-10</td>
              <td>2:30 PM</td>
              <td><span class="status completed">Completed</span></td>
              <td>Follow-up in 2 weeks</td>
              <td><button class="view-btn"><a href="doctor-patient-view.html">View</a></button></td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Add Notes Section -->
      <section class="add-notes">
        <h2>Add Notes to Appointment</h2>
        <form id="notesForm">
          <input type="text" id="patientName" placeholder="Patient Name" required />
          <textarea id="doctorNotes" placeholder="Write notes here..." rows="3" required></textarea>
          <button type="submit">Save Notes</button>
        </form>
      </section>
    </main>
  </div>

  <script>
    // Maintain simple local logic (no backend required)
    const notesForm = document.getElementById("notesForm");
    const table = document.getElementById("appointmentTable");

    notesForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const patientName = document.getElementById("patientName").value;
      const doctorNotes = document.getElementById("doctorNotes").value;

      const rows = table.getElementsByTagName("tr");
      for (let i = 0; i < rows.length; i++) {
        if (rows[i].children[0].innerText === patientName) {
          rows[i].children[4].innerText = doctorNotes;
          alert("Notes added successfully!");
          break;
        }
      }
      notesForm.reset();
    });

    // Update appointment status logic
    table.addEventListener("click", (e) => {
      if (e.target.classList.contains("complete-btn")) {
        const row = e.target.closest("tr");
        row.querySelector(".status").innerText = "Completed";
        row.querySelector(".status").className = "status completed";
      }

      if (e.target.classList.contains("cancel-btn")) {
        const row = e.target.closest("tr");
        row.querySelector(".status").innerText = "Cancelled";
        row.querySelector(".status").className = "status cancelled";
      }
    });
  </script>
</body>
</html>
